<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- seo tags -->
     <meta name="description " content="Delivering compassionate, expert care with advanced technology for a healthier tomorrow.">
     <meta name="robots" content="index,follow">
     <link rel="canonical" href="http://clinic-web-eight.vercel.app/">
     <meta property="og:title" content="Loka Medicals">
     <meta property="og:description" content="Delivering compassionate, expert care with advanced technology for a healthier tomorrow.">
     <meta name="geo.region" content="IN-KL">
     <meta name="geo.placename" content="Trivandrum">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="CSS/web.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <title>Loka Medicals - Admin Dashboard</title>
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    
    <div class="container-fluid">
      <div class="row">
        <!-- Mobile Menu Button -->
        <div class="d-md-none position-fixed top-0 start-0 p-3" style="z-index: 1050;">
          <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarOffcanvas" aria-controls="sidebarOffcanvas">
            <i class="fas fa-bars"></i>
          </button>
        </div>

        <!-- Sidebar for Desktop -->
        <div class="col-md-3 col-lg-2 d-none d-md-block bg-dark sidebar" style="min-height: 100vh;">
          <div class="position-sticky pt-3">
            <div class="text-center mb-4">
              <i class="fas fa-hospital-alt text-white" style="font-size: 2rem;"></i>
              <h5 class="text-white mt-2">Loka Medicals</h5>
              <p class="text-muted small">Admin Dashboard</p>
            </div>
            
            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link text-white active" href="#" onclick="showDashboard()">
                  <i class="fas fa-tachometer-alt me-2"></i>
                  Dashboard
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-white" href="#" onclick="showManageStaff()">
                  <i class="fas fa-users me-2"></i>
                  Manage Staff
                </a>
              </li>

              <li class="nav-item mt-4">
                <a class="nav-link text-danger" href="login.html">
                  <i class="fas fa-sign-out-alt me-2"></i>
                  Logout
                </a>
              </li>
            </ul>
          </div>
        </div>

        <!-- Mobile Sidebar Offcanvas -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarOffcanvas" aria-labelledby="sidebarOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="sidebarOffcanvasLabel">
              <i class="fas fa-hospital-alt text-primary me-2"></i>
              Loka Medicals
            </h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <div class="text-center mb-4">
              <p class="text-muted small">Admin Dashboard</p>
            </div>
            
            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link text-dark active" href="#" onclick="showDashboard(); closeMobileMenu();">
                  <i class="fas fa-tachometer-alt me-2"></i>
                  Dashboard
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-dark" href="#" onclick="showManageStaff(); closeMobileMenu();">
                  <i class="fas fa-users me-2"></i>
                  Manage Staff
                </a>
              </li>

              <li class="nav-item mt-4">
                <a class="nav-link text-danger" href="login.html">
                  <i class="fas fa-sign-out-alt me-2"></i>
                  Logout
                </a>
              </li>
            </ul>
          </div>
        </div>

        <!-- Main Content -->
        <div class="col-12 col-md-9 col-lg-10 ms-sm-auto px-md-4">
          <!-- Top Navigation -->
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2" id="pageTitle">Dashboard</h1>
            <div class="btn-toolbar mb-2 mb-md-0">
              <div class="btn-group me-2">
                <span class="text-muted">Welcome, Admin</span>
              </div>
            </div>
          </div>

          <!-- Dashboard Content -->
          <div id="dashboardContent">
            <div class="row">
              <div class="col-xl-3 col-md-6 mb-4">
                <div class="card border-left-primary shadow h-100 py-2">
                  <div class="card-body">
                    <div class="row no-gutters align-items-center">
                      <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                          Total Staff</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">25</div>
                      </div>
                      <div class="col-auto">
                        <i class="fas fa-users fa-2x text-gray-300"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xl-3 col-md-6 mb-4">
                <div class="card border-left-success shadow h-100 py-2">
                  <div class="card-body">
                    <div class="row no-gutters align-items-center">
                      <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                          Total Patients</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">150</div>
                      </div>
                      <div class="col-auto">
                        <i class="fas fa-user-injured fa-2x text-gray-300"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xl-3 col-md-6 mb-4">
                <div class="card border-left-info shadow h-100 py-2">
                  <div class="card-body">
                    <div class="row no-gutters align-items-center">
                      <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                          Appointments Today</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">18</div>
                      </div>
                      <div class="col-auto">
                        <i class="fas fa-calendar fa-2x text-gray-300"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xl-3 col-md-6 mb-4">
                <div class="card border-left-warning shadow h-100 py-2">
                  <div class="card-body">
                    <div class="row no-gutters align-items-center">
                      <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                          Revenue (Monthly)</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">â‚¹40,00,000</div>
                      </div>
                      <div class="col-auto">
                        <i class="fas fa-rupee-sign fa-2x text-gray-300"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-6">
                <div class="card shadow mb-4">
                  <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-white">Recent Activities</h6>
                  </div>
                  <div class="card-body">
                    <div class="list-group list-group-flush">
                      <div class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                          <strong>New patient registered</strong>
                          <br><small class="text-muted">John Doe - Cardiology</small>
                        </div>
                        <span class="badge bg-primary rounded-pill">2 min ago</span>
                      </div>
                      <div class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                          <strong>Appointment scheduled</strong>
                          <br><small class="text-muted">Dr. Sarah Johnson - 2:30 PM</small>
                        </div>
                        <span class="badge bg-success rounded-pill">15 min ago</span>
                      </div>
                      <div class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                          <strong>Staff member added</strong>
                          <br><small class="text-muted">Nurse Maria Garcia</small>
                        </div>
                        <span class="badge bg-info rounded-pill">1 hour ago</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="card shadow mb-4">
                  <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-white">Quick Actions</h6>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <div class="col-6 mb-3">
                        <button class="btn btn-primary w-100" onclick="showManageStaff()">
                          <i class="fas fa-user-plus me-2"></i>Add Staff
                        </button>
                      </div>
                      
                      <div class="col-6 mb-3">
                        <button class="btn btn-info w-100">
                          <i class="fas fa-calendar-plus me-2"></i>Schedule Appointment
                        </button>
                      </div>
                      <div class="col-6 mb-3">
                        <button class="btn btn-warning w-100">
                          <i class="fas fa-chart-bar me-2"></i>View Reports
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Manage Staff Content -->
          <div id="staffContent" style="display: none;">
            <div class="row mb-3">
              <div class="col-md-6">
                <h4>Staff Management</h4>
              </div>
              <div class="col-md-6 text-end">
                <button class="btn btn-primary" onclick="showAddStaffForm()">
                  <i class="fas fa-plus me-2"></i>Add New Staff
                </button>
              </div>
            </div>

            <!-- Add Staff Form -->
            <div id="addStaffForm" style="display: none;" class="card mb-4">
              <div class="card-header">
                <h5 class="mb-0">Add New Staff Member</h5>
              </div>
              <div class="card-body">
                <form id="staffForm">
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="staffName" class="form-label">Full Name</label>
                      <input type="text" class="form-control" id="staffName" required>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="staffEmail" class="form-label">Email</label>
                      <input type="email" class="form-control" id="staffEmail" required>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="staffPhone" class="form-label">Phone</label>
                      <input type="tel" class="form-control" id="staffPhone" required>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="staffRole" class="form-label">Role</label>
                      <select class="form-select" id="staffRole" required onchange="toggleDepartmentField()">
                        <option value="">Select Role</option>
                        <option value="Doctor">Doctor</option>
                        <option value="Nurse">Nurse</option>
                        <option value="Receptionist">Receptionist</option>
                        <option value="Admin">Admin</option>
                      </select>
                    </div>
                    <div class="col-md-6 mb-3" id="departmentField">
                      <label for="staffDepartment" class="form-label">Department</label>
                      <select class="form-select" id="staffDepartment">
                        <option value="">Select Department</option>
                        <option value="Cardiology">Cardiology</option>
                        <option value="Neurology">Neurology</option>
                        <option value="Orthopedics">Orthopedics</option>
                        <option value="Pediatrics">Pediatrics</option>
                        <option value="General">General</option>
                      </select>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="staffSalary" class="form-label">Salary</label>
                      <input type="number" class="form-control" id="staffSalary" required>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="generatedUsername" class="form-label">Generated Username</label>
                      <div class="input-group">
                        <input type="text" class="form-control" id="generatedUsername" readonly>
                        <button class="btn copy-btn" type="button" onclick="copyToClipboard('generatedUsername')">
                          <i class="fas fa-copy"></i>
                        </button>
                      </div>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="generatedPassword" class="form-label">Generated Password</label>
                      <div class="input-group">
                        <input type="text" class="form-control" id="generatedPassword" readonly>
                        <button class="btn copy-btn" type="button" onclick="copyToClipboard('generatedPassword')">
                          <i class="fas fa-copy"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="text-end">
                    <button type="button" class="btn btn-secondary me-2" onclick="hideAddStaffForm()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Staff</button>
                  </div>
                </form>
              </div>
            </div>

            <!-- Staff List -->
            <div class="card">
              <div class="card-header">
                <h5 class="mb-0">Staff List</h5>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-striped">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Role</th>
                        <th>Department</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody id="staffTableBody">
                      <tr>
                        <td>Dr. Sarah Johnson</td>
                        <td><span class="badge bg-primary">Doctor</span></td>
                        <td>Cardiology</td>
                        <td>sarah.johnson@lokamedicals.com</td>
                        <td>+1 234 567 8901</td>
                        <td>
                          <button class="btn btn-sm btn-outline-primary me-1">Edit</button>
                          <button class="btn btn-sm btn-outline-danger">Delete</button>
                        </td>
                      </tr>
                      <tr>
                        <td>Nurse Maria Garcia</td>
                        <td><span class="badge bg-success">Nurse</span></td>
                        <td>General</td>
                        <td>maria.garcia@lokamedicals.com</td>
                        <td>+1 234 567 8902</td>
                        <td>
                          <button class="btn btn-sm btn-outline-primary me-1">Edit</button>
                          <button class="btn btn-sm btn-outline-danger">Delete</button>
                        </td>
                      </tr>
                      <tr>
                        <td>John Smith</td>
                        <td><span class="badge bg-info">Receptionist</span></td>
                        <td>General</td>
                        <td>john.smith@lokamedicals.com</td>
                        <td>+1 234 567 8903</td>
                        <td>
                          <button class="btn btn-sm btn-outline-primary me-1">Edit</button>
                          <button class="btn btn-sm btn-outline-danger">Delete</button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          
        </div>
      </div>
    </div>

    <script>
      // Navigation functions
      function showDashboard() {
        document.getElementById('dashboardContent').style.display = 'block';
        document.getElementById('staffContent').style.display = 'none';
        document.getElementById('patientsContent').style.display = 'none';
        document.getElementById('pageTitle').textContent = 'Dashboard';
        updateActiveNav('dashboard');
      }

             function showManageStaff() {
         document.getElementById('dashboardContent').style.display = 'none';
         document.getElementById('staffContent').style.display = 'block';
         document.getElementById('pageTitle').textContent = 'Manage Staff';
         updateActiveNav('staff');
       }

             function updateActiveNav(section) {
         // Remove active class from all nav links
         document.querySelectorAll('.nav-link').forEach(link => {
           link.classList.remove('active');
         });
         
         // Add active class to current section
         if (section === 'dashboard') {
           document.querySelector('.nav-link[onclick="showDashboard()"]').classList.add('active');
         } else if (section === 'staff') {
           document.querySelector('.nav-link[onclick="showManageStaff()"]').classList.add('active');
         }
       }

      // Staff management functions
      function showAddStaffForm() {
        document.getElementById('addStaffForm').style.display = 'block';
      }

      function hideAddStaffForm() {
        document.getElementById('addStaffForm').style.display = 'none';
        document.getElementById('staffForm').reset();
      }

      

      // Form submissions
      document.getElementById('staffForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get form data
        const staffData = {
          name: document.getElementById('staffName').value,
          email: document.getElementById('staffEmail').value,
          phone: document.getElementById('staffPhone').value,
          role: document.getElementById('staffRole').value,
          department: document.getElementById('staffDepartment').value,
          salary: document.getElementById('staffSalary').value,
          username: document.getElementById('generatedUsername').value,
          password: document.getElementById('generatedPassword').value
        };
        
        // Validate form
        if (!validateStaffForm(staffData)) {
          return;
        }
        
        // Add to staff table
        addStaffToTable(staffData);
        
        // Show success message with credentials
        showStaffSuccessMessage(staffData);
        
        hideAddStaffForm();
      });

      

      // Mobile menu function
      function closeMobileMenu() {
        const offcanvas = document.getElementById('sidebarOffcanvas');
        const bsOffcanvas = bootstrap.Offcanvas.getInstance(offcanvas);
        if (bsOffcanvas) {
          bsOffcanvas.hide();
        }
      }

      // Initialize dashboard
      showDashboard();

      // Add event listeners for auto-generating credentials
      document.addEventListener('DOMContentLoaded', function() {
        const staffForm = document.getElementById('staffForm');
        if (staffForm) {
          staffForm.addEventListener('input', generateCredentials);
        }
      });

      // New functions for staff management
             function toggleDepartmentField() {
         const roleSelect = document.getElementById('staffRole');
         const departmentField = document.getElementById('departmentField');
         const departmentSelect = document.getElementById('staffDepartment');

         if (roleSelect.value === 'Receptionist' || roleSelect.value === 'Admin') {
           departmentField.classList.add('hidden');
           departmentSelect.value = ''; // Clear department if hidden
           departmentSelect.removeAttribute('required'); // Remove required attribute
         } else {
           departmentField.classList.remove('hidden');
           departmentSelect.setAttribute('required', 'required'); // Add required attribute back
         }
         
         // Generate credentials when role changes
         generateCredentials();
       }

             function generateCredentials() {
         const staffName = document.getElementById('staffName').value;
         const staffRole = document.getElementById('staffRole').value;
         const staffDepartment = document.getElementById('staffDepartment').value;

         if (!staffName || !staffRole) {
           document.getElementById('generatedUsername').value = '';
           document.getElementById('generatedPassword').value = '';
           return;
         }

         // Generate 6-digit username
         let username = '';
         if (staffRole === 'Receptionist' || staffRole === 'Admin') {
           // Use "loka" as department for receptionist and admin
           username = generateUsername('loka', staffRole, staffName);
         } else {
           username = generateUsername(staffDepartment, staffRole, staffName);
         }

         // Generate 6-letter password with uppercase, lowercase, and special character
         const password = generatePassword();

         document.getElementById('generatedUsername').value = username;
         document.getElementById('generatedPassword').value = password;
       }

       function generateUsername(department, role, fullName) {
         // Create base from department, role, and name
         const deptCode = department ? department.substring(0, 2).toLowerCase() : 'lo';
         const roleCode = role.substring(0, 2).toLowerCase();
         const nameCode = fullName.replace(/\s/g, '').substring(0, 2).toLowerCase();
         
         // Generate a random 3-digit number to make it 6 digits total
         const randomNum = Math.floor(Math.random() * 900) + 100;
         
         return (deptCode + roleCode + nameCode + randomNum).substring(0, 6);
       }

       function generatePassword() {
         const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
         const lowercase = 'abcdefghijklmnopqrstuvwxyz';
         const special = '!@#$%^&*';
         
         let password = '';
         
         // Ensure at least one of each type
         password += uppercase[Math.floor(Math.random() * uppercase.length)];
         password += lowercase[Math.floor(Math.random() * lowercase.length)];
         password += special[Math.floor(Math.random() * special.length)];
         
         // Fill remaining 3 characters randomly
         const allChars = uppercase + lowercase + special;
         for (let i = 0; i < 3; i++) {
           password += allChars[Math.floor(Math.random() * allChars.length)];
         }
         
         // Shuffle the password
         return password.split('').sort(() => Math.random() - 0.5).join('');
       }

             function copyToClipboard(id) {
         const text = document.getElementById(id).value;
         navigator.clipboard.writeText(text).then(() => {
           showAlert('Credentials copied to clipboard!', 'success');
         }).catch(err => {
           console.error('Failed to copy credentials: ', err);
           showAlert('Failed to copy credentials', 'danger');
         });
       }

       function addStaffToTable(staffData) {
         const tableBody = document.getElementById('staffTableBody');
         const newRow = document.createElement('tr');
         
         const roleBadge = getRoleBadge(staffData.role);
         const department = staffData.role === 'Receptionist' || staffData.role === 'Admin' ? 'General' : staffData.department;
         
         newRow.innerHTML = `
           <td>${staffData.name}</td>
           <td>${roleBadge}</td>
           <td>${department}</td>
           <td>${staffData.email}</td>
           <td>${staffData.phone}</td>
           <td>
             <button class="btn btn-sm btn-outline-primary me-1">Edit</button>
             <button class="btn btn-sm btn-outline-danger">Delete</button>
           </td>
         `;
         
         tableBody.appendChild(newRow);
       }

       function getRoleBadge(role) {
         const badges = {
           'Doctor': '<span class="badge bg-primary">Doctor</span>',
           'Nurse': '<span class="badge bg-success">Nurse</span>',
           'Receptionist': '<span class="badge bg-info">Receptionist</span>',
           'Admin': '<span class="badge bg-warning">Admin</span>'
         };
         return badges[role] || '<span class="badge bg-secondary">Staff</span>';
       }

       function showStaffSuccessMessage(staffData) {
         const successAlert = document.createElement('div');
         successAlert.className = 'alert alert-success alert-dismissible fade show position-fixed staff-success-alert';
         successAlert.innerHTML = `
           <div class="d-flex align-items-start">
             <i class="fas fa-check-circle me-2 mt-1" style="font-size: 1.2rem;"></i>
             <div class="flex-grow-1">
               <strong>Staff Member Added Successfully!</strong><br>
               <small class="text-muted">
                 <strong>Name:</strong> ${staffData.name}<br>
                 <strong>Role:</strong> ${staffData.role}<br>
                 <strong>Username:</strong> ${staffData.username}<br>
                 <strong>Password:</strong> ${staffData.password}<br>
                 <em>Please save these credentials securely!</em>
               </small>
             </div>
           </div>
           <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
         `;
         
         document.body.appendChild(successAlert);
         setTimeout(() => { 
           if (successAlert.parentNode) { 
             successAlert.remove(); 
           } 
         }, 8000);
       }

       function validateStaffForm(staffData) {
         // Check if all required fields are filled
         if (!staffData.name || !staffData.email || !staffData.phone || !staffData.role || !staffData.salary) {
           showAlert('Please fill in all required fields', 'danger');
           return false;
         }
         
         // Check if department is required but not filled
         if (staffData.role !== 'Receptionist' && staffData.role !== 'Admin' && !staffData.department) {
           showAlert('Please select a department for this role', 'danger');
           return false;
         }
         
         // Validate email format
         const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
         if (!emailRegex.test(staffData.email)) {
           showAlert('Please enter a valid email address', 'danger');
           return false;
         }
         
         // Validate phone number (basic validation)
         const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;
         if (!phoneRegex.test(staffData.phone.replace(/\s/g, ''))) {
           showAlert('Please enter a valid phone number', 'danger');
           return false;
         }
         
         // Validate salary
         if (staffData.salary <= 0) {
           showAlert('Please enter a valid salary amount', 'danger');
           return false;
         }
         
         return true;
       }

       function showAlert(message, type = 'info') {
         const alert = document.createElement('div');
         alert.className = `alert alert-${type} alert-dismissible fade show position-fixed responsive-alert`;
         alert.innerHTML = `
           <div class="d-flex align-items-center">
             <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'danger' ? 'exclamation-triangle' : 'info-circle'} me-2" style="font-size: 1.2rem;"></i>
             <div>${message}</div>
           </div>
           <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
         `;
         
         document.body.appendChild(alert);
         setTimeout(() => { 
           if (alert.parentNode) { 
             alert.remove(); 
           } 
         }, 5000);
       }

       // Staff search functionality
       function searchStaff() {
         const searchInput = document.getElementById('staffSearchInput');
         const searchTerm = searchInput.value.toLowerCase().trim();
         const tableBody = document.getElementById('staffTableBody');
         const rows = tableBody.getElementsByTagName('tr');
         
         let visibleCount = 0;
         
         for (let i = 0; i < rows.length; i++) {
           const row = rows[i];
           const cells = row.getElementsByTagName('td');
           
           if (cells.length === 0) continue; // Skip header row
           
           // Get text content from relevant cells (name, role, department, email)
           const name = cells[0].textContent.toLowerCase();
           const role = cells[1].textContent.toLowerCase();
           const department = cells[2].textContent.toLowerCase();
           const email = cells[3].textContent.toLowerCase();
           
           // Check if any field contains the search term
           const matches = name.includes(searchTerm) || 
                          role.includes(searchTerm) || 
                          department.includes(searchTerm) || 
                          email.includes(searchTerm);
           
           if (matches || searchTerm === '') {
             row.style.display = '';
             visibleCount++;
           } else {
             row.style.display = 'none';
           }
         }
         
         // Show/hide "no results" message
         showNoResultsMessage(visibleCount === 0 && searchTerm !== '');
       }
       
       function clearStaffSearch() {
         const searchInput = document.getElementById('staffSearchInput');
         searchInput.value = '';
         searchStaff(); // This will show all rows
       }
       
       function showNoResultsMessage(show) {
         let noResultsRow = document.getElementById('noResultsRow');
         
         if (show) {
           if (!noResultsRow) {
             noResultsRow = document.createElement('tr');
             noResultsRow.id = 'noResultsRow';
             noResultsRow.innerHTML = `
               <td colspan="6" class="text-center text-muted py-4">
                 <i class="fas fa-search me-2"></i>
                 No staff members found matching your search criteria.
               </td>
             `;
             document.getElementById('staffTableBody').appendChild(noResultsRow);
           }
         } else {
           if (noResultsRow) {
             noResultsRow.remove();
           }
         }
       }
    </script>
  </body>
</html>